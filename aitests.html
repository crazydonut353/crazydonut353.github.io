<!DOCTYPE html>
<html>
<body>
<h1>JavaScript Neural Networks</h1>

<p>Will I go to the concert?</p>
<div id="demo"></div>

<script>
class Neuron {
	constructor(t,numWeights, learningRate = 0.00001) {
    	this.threshold = t;
        this.learningRate = learningRate;
        this.weights = [];
        for(let j = 0; j < numWeights; j++) {
        	this.weights.push(Math.random());
        }
    }
    
    calculateOut(inputs) {
    	let sum = 0;
        inputs.forEach((v,i,a)=>{sum+=v*this.weights[i]});
        return sum > this.threshold;
    }
    
    train(inputs, desired) {
    	let guess = this.calculateOut(inputs);
        let error = desired - guess;
        if (error != 0) {
          	for (let i = 0; i < inputs.length; i++) {
            	this.weights[i] += this.learningRate * error * inputs[i];
          	}
        }
    }
}

class Layer {
	constructor(numNeurons, plnn) {
    	this.neurons = [];
        for(let i = 0; i < numNeurons; i++) {
        	this.neurons.push(new Neuron(Math.random()*plnn,plnn));
        }
    }
    
    calcOut(inputs) {
    	let out = [];
   		for(let i = 0; i < this.neurons.length; i++) {
        	out.push(this.neurons[i].calculateOut(inputs));
        }
        return out;
    }
}

class Network {
	constructor() {
		this.layer0 = new Layer(4,3);
		this.layer1 = new Layer(4,4);
		this.out = new Layer(3,4);
	}
	calculate(input) {
		const layer0Out = this.layer0.calcOut(input);
		const layer1Out = this.layer1.calcOut(layer0Out);
		const out = this.out.calcOut(layer1Out);
		return out;
	}
}
	
const threshold = 1.5;
const network = new Network();

document.getElementById("demo").innerHTML = network.calculate([1,0,1]);  
</script>

</body>
</html>
